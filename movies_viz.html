<!DOCTYPE html>
<!-- push to github every 5 min -->
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="Viewport"
            content="width=device-width, initial-scale=1.0">
        <title>Movies and the Economy</title>
        <link rel="stylesheet" href="styles.css"> 
        <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    </head>
    <body>
        <div class="container">
            <nav>
                <a href="index.html" aria-label="Home"><img src="images/logo.jpg" alt="logo" class="logo"></a>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="#">Projects</a></li>
                    <li><a href="#">Art</a></li>
                </ul>
            </nav>
        </div>
        <section class="film-scene">
            <div class="film-container">
                <div id="film-roll">
                    <div class="reel-outer">
                    <div class="reel-inner">
                        <div class="reel-core"></div>
                    </div>
                    </div>
                    <div class="film-strip"></div>
                    <div class="spokes"></div>
                </div>
            </div>
            <section id="rising-section">
                <h1>Past, Present, Projection: How Movies Reflect the World</h1>
                <h3>A data visualization project on how film genres reflect economic trends.</h3>
                <div class="project-meta">
                    <p style="font-size: 20px; font-weight: 400"><b>Role: </b> Visual Designer & Data Visualization Developer</p>
                    <p><b>Team: </b> 3 students</p>
                    <p><b>Timeline: </b> 2 months</p>
                    <p><b>Tools: </b> HTML, CSS, Javascript (D3.js), React</p>
                    <p><b>Project: </b>View the full website <a href="https://jvizhco.github.io/unemployment/" target="_blank" rel="noopener">here.</a></p>
                </div>
                <div class="project-section">
                    <h2 class="underline-on-scroll">The Problem and Motivation</h2>
                    <p>Inspired by recent online trends that have highlighted certain products 
                    (such as Labubus and lipsticks) as <span class="highlight-blue">"recession indicators,"</span> we decided to 
                    research whether <span class="highlight-pink">entertainment</span> itself could also serve as an economic indicator.</p>
                    <p>We found that during the COVID-19 pandemic, audiences were most interested in superhero and action movies, 
                        leading us to ask our fundamental question: 
                        <b> Does the world tend to watch certain genres during devastating times, such as periods of economic hardship?</b></p>                
                </div>
                <img src="images/movies/superhero_trend.png" alt="superhero_trend">
                <div class="project-section">
                    <h2 class="underline-on-scroll">My Role and Contributions</h2>
                    <p>This project was a collaborative effort where we all contributed equally to the process and worked on the same tasks 
                        during the early stages of the project which involved <span class="highlight-blue">data analysis, sketching visualizations, and storyboarding.</span></p>
                    <p>As we moved into the development phase, I took on the role of <span class="highlight-pink">designing the overall look and feel of the website,</span> as well as implementing some of the visualizations using D3.js and React. 
                        I was responsible for creating the (non-visualization) <span class="highlight-pink">interactive elements</span> that would be used throughout the website, including any animations. I also worked on optimizing the performance of the visualizations to ensure a smooth user experience.</p>
                </div>
                <div class="project-section">
                    <h2 class="underline-on-scroll">From Data to insights</h2>
                    <p>We began by analyzing datasets that provided information regarding <span class="highlight-blue">global indicators</span> such as unemployment rates and economic freedom indices, as well as <span class="highlight-pink">movie statistics</span> such as popularity ratings, genre categorizations, and box office revenues.</p>
                    <p>I focused on finding patterns between unemployment rates in the United States and the most popular genres in the domestic market, as well as the popularity of these genres on a global scale, using countries' economic freedom indices.</p>
                </div>

                 <!-- Overlapping work gallery -->
                <section class="overlap-gallery">
                    <div class="gallery" aria-hidden="false">
                    <div class="overlap-item">
                        <img src="images/movies/economic_map.png" alt="Economic freedom index map">
                    </div>
                    <div class="overlap-item">
                        <img src="images/movies/genre_reel.png" alt="Weather 2 Wear intro">
                    </div>
                    <div class="overlap-item">
                        <img src="images/movies/unemployment_barchart.png" alt="WHOOP case study intro">
                    </div>
                    <div class="overlap-item">
                        <img src="images/movies/line_graph.png" alt="Weather 2 Wear app intro">
                    </div>
                    </div>
                    <figcaption>Preliminary visualization sketches on paper</figcaption>
                </section>

                <div class="project-section" style="padding-top: 2rem;">
                    <h2 class="underline-on-scroll">Creating the Storyline</h2>
                    <p>Once we decided what type of visualizations we wanted to create, we began crafting the narrative. After hours of storyboarding and testing different approaches, we chose to tell the story of the insights 
                        we ourselves had gained through our research. </p>
                    <p>While we had initially theorized that the popularity of 
                        general genres such as drama, romance, action, and horror would best mirror the changing state of the economy, 
                        we found that the economy was more accurately represented by the popularity and production of movies that fell 
                        into two categories: <span class="highlight-blue">escapism</span> and <span class="highlight-pink">non-escapism</span>.</p>
                        <p><b>Thus, we would begin with visualizations analyzing trends seen across different genres and then redirect our focus to the correlations between the economy and escapism.</b></p>
                        <div class="two-column-layout">
                            <img src="images/movies/CS171 Project Storyboard.png" alt="storyboard">
                            <img src="images/movies/escapism.png" alt="escapism vs nonescapism website section">
                        </div>
                </div>
                <div class="project-section">
                    <h2 class="underline-on-scroll">Visualizing the Website</h2>
                    <p>When creating the website, I wanted to integrate film elements and transitions that were cinematic and contributed to a <span class="highlight-pink">scrollytelling experience.</span></p>
                    <p>Reflecting our visualizations' key feature of being timelines from 1995 to 2024, I designed an evolving website that mimicked <span class="highlight-blue">the journey of movies through time.</span></p>
                    <div class="two-column-layout">
                        <figure>
                            <figcaption class="upper-caption">The website opens up with a vintage film countdown</figcaption>
                            <img src="images/movies/movies_opening.gif" alt="movies opening animation">
                        </figure>
                        <figure>
                            <figcaption class="upper-caption">...and ends with a Netflix-style profile section. </figcaption>
                            <img src="images/movies/ending_profiles.gif" alt="movies ending animation">
                        </figure>
                    </div>
                    <p>The color palette was inspired by the movie presented in our hook, <span class="highlight-blue"><i>Spider-Man: No Way Home</i> (2021),</span> 
                        featuring deep blues, strong reds, and bright ambers.</p>
                </div>
                <div class="two-column-images">
                        <img src="images/movies/film-roll.png" alt="film-roll">
                        <img src="images/movies/spider.png" alt="spider">
                        <img src="images/movies/arrowweb.png" alt="arrow web">
                        <img src="images/movies/spider-web.png" alt="spider-web">
                </div>
                <p>section in progress...</p>
            </section>
        </section>
        <div id="scroll-spacer"></div>
        

        <script> 
            const film = document.getElementById("film-roll");
            const risingSection = document.getElementById("rising-section");
            const filmScene = document.querySelector(".film-scene");
            const sceneTop = filmScene.offsetTop;

            const ROTATE_PHASE = 250;
            const RISE_START = 80;
            const RISE_PHASE = 220;
            const TOTAL = ROTATE_PHASE + RISE_PHASE;

            // Calculate the initial reel center position (when page loads)
            let initialReelCenter = null;

            console.log(`ROTATE_PHASE: ${ROTATE_PHASE}, RISE_PHASE: ${RISE_PHASE}, TOTAL: ${TOTAL}`);
            console.log(`Initial window.innerHeight: ${window.innerHeight}`);

            // Spokes
            const spokeContainer = document.querySelector('.spokes');
            for (let i = 0; i < 12; i++) {
                const spoke = document.createElement('div');
                spoke.className = 'spoke';
                spoke.style.transform = `rotate(${(i * 360) / 12}deg)`;
                spokeContainer.appendChild(spoke);
            }

            window.addEventListener("scroll", () => {
                const rawScroll = window.scrollY;
                const sceneScroll = rawScroll - sceneTop;
                const scroll = Math.max(0, sceneScroll);

                // Set initial reel center on first scroll
                if (initialReelCenter === null) {
                    const reelRect = film.getBoundingClientRect();
                    initialReelCenter = reelRect.top + reelRect.height / 2;
                    console.log(`Initial reel center set at: ${initialReelCenter}px`);
                }

                console.log(`window.scrollY: ${window.scrollY}, clamped scrollY: ${scroll}`);

                /* -------- FILM ROTATION -------- */

                let rotation;

                if (scroll <= ROTATE_PHASE) {
                    rotation = (scroll / ROTATE_PHASE) * 45;
                    console.log(`phase: ROTATING (0-${ROTATE_PHASE}), rotation: ${rotation.toFixed(2)}deg`);
                } else {
                    rotation = 45 + (scroll - ROTATE_PHASE) * 0.25;
                    console.log(`phase: ROTATION+ (>${ROTATE_PHASE}), rotation: ${rotation.toFixed(2)}deg`);
                }

                film.style.transform = `rotate(${rotation}deg)`;
                console.log(`applied film transform: rotate(${rotation}deg)`);

                /* -------- SECTION RISE -------- */

                // Calculate current position of rising section
                const RISE_SPEED = 1.5; // How fast the section rises (higher = faster)
                let currentY = window.innerHeight - scroll * RISE_SPEED;
                
                // Check if section has reached the reel center (using initial position)
                const hasReachedCenter = currentY <= initialReelCenter;
                
                if (!hasReachedCenter) {
                    // Phase 1: Rising from bottom
                    risingSection.style.position = "fixed";
                    risingSection.style.left = "50%";
                    risingSection.style.top = "0";
                    
                    risingSection.style.transform = `translateX(-50%) translateY(${currentY}px)`;
                    
                    // Reset film container position
                    const filmContainer = document.querySelector(".film-container");
                    filmContainer.style.transform = `translateY(0)`;
                    
                } else {
                    // Phase 2: Latched - calculate how far past the latch point we are
                    const latchScrollPoint = (window.innerHeight - initialReelCenter) / RISE_SPEED;
                    const scrollPastLatch = scroll - latchScrollPoint;
                    const moveUp = scrollPastLatch * RISE_SPEED;
                    
                    // Both reel and section move up together
                    const finalY = initialReelCenter - moveUp;
                    
                    risingSection.style.position = "fixed";
                    risingSection.style.left = "50%";
                    risingSection.style.top = "0";
                    risingSection.style.transform = `translateX(-50%) translateY(${finalY}px)`;
                    
                    // Also move the film container up
                    const filmContainer = document.querySelector(".film-container");
                    filmContainer.style.transform = `translateY(-${moveUp}px)`;
                }
            });

            // Underline headings when they enter the viewport
            (function() {
                const targets = document.querySelectorAll('.underline-on-scroll');
                if (!targets.length) return;

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('active');
                        } else {
                            entry.target.classList.remove('active');
                        }
                    });
                }, { threshold: 0.5 });

                targets.forEach(t => observer.observe(t));
            })();

        // Fade in sections when they enter the viewport
            (function() {
                const sections = document.querySelectorAll('.project-section');
                if (!sections.length) return;

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('fade-in-active');
                        }
                    });
                }, { threshold: 0.2 });

                sections.forEach(section => {
                    section.classList.add('fade-in');
                    observer.observe(section);
                });
            })();

        </script>
    </body>

</html>